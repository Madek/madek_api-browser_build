(function(){null==window.JST&&(window.JST={}),window.JST["alert/danger"]=function(e){return function(){var e,n;return e=window.HAML.cleanValue,n=[],n.push("<div class='alert alert-danger'>"),n.push("  "+e(this.message)),n.push("</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(e))}}).call(this),function(){null==window.JST&&(window.JST={}),window.JST["alert/success"]=function(e){return function(){var e,n;return e=window.HAML.cleanValue,n=[],n.push("<div class='alert alert-success'>"),n.push("  "+e(this.message)),n.push("</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["alert/warning"]=function(e){return function(){var e,n;return e=window.HAML.cleanValue,n=[],n.push("<div class='alert alert-warning'>"),n.push("  "+e(this.message)),n.push("</div>"),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST.jqXHR_status=function(e){return function(){var e,n,t;return n=window.HAML.escape,e=window.HAML.cleanValue,t=[],t.push("<span>\n  <strong>"),t.push("    "+n(e(this.jqXHR.status))),t.push("  </strong>"),t.push("  "+n(e(this.jqXHR.statusText))),t.push("</span>"),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"")}.call(window.HAML.context(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST.loading=function(e){return function(){var e,n;return e=window.HAML.cleanValue,n=[],n.push("<i class='fa fa-circle-o-notch fa-spin'></i>"),n.push(""+e(this.message)),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["relation/delete"]=function(e){return function(){var e,n,t;return n=window.HAML.escape,e=window.HAML.cleanValue,t=[],t.push("<a class='btn btn-danger btn-xs method method-delete relation' href='"+n(e(this.href))+"' data-method='delete'>\n  DELETE\n</a>"),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["relation/get"]=function(e){return function(){var e,n,t;return n=window.HAML.escape,e=window.HAML.cleanValue,t=[],t.push("<a class='"+["relation","method","method-get","btn","btn-success","btn-xs",""+n(e(APP.URL.isTemplated(this.href)?"templated":"non-templated"))].sort().join(" ").replace(/^\s+|\s+$/g,"")+"' href='"+n(e(this.href))+"'>\n  GET\n</a>"),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["relation/meta_relation_item"]=function(e){return function(){var e,n,t;return n=window.HAML.escape,e=window.HAML.cleanValue,t=[],t.push("<li class='meta-link'>\n  <a class='relation' href='"+n(e(APP.URL.amend(this.rel.href)))+"'>\n    <i class='fa fa-link'></i>"),t.push("    "+n(e(this.name))),t.push("  </a>\n</li>"),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["relation/post"]=function(e){return function(){var e,n,t;return n=window.HAML.escape,e=window.HAML.cleanValue,t=[],t.push("<a class='btn btn-warning btn-xs method method-put relation' href='"+n(e(this.href))+"' data-method='post'>\n  POST\n</a>"),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["relation/put"]=function(e){return function(){var e,n,t;return n=window.HAML.escape,e=window.HAML.cleanValue,t=[],t.push("<a class='btn btn-warning btn-xs method method-post relation' href='"+n(e(this.href))+"' data-method='put'>\n  PUT\n</a>"),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["relation/row"]=function(e){return function(){var e,n,t,r,o,a;n=window.HAML.escape,e=window.HAML.cleanValue,t=[],t.push("<tr class='relation-row'>\n  <td class='rel-name'>"+n(e(this.relName))+"</td>\n  <td class='title'>"+n(e(this.title))+"</td>\n  <td class='meta-relations'>\n    <ul class='list-inline list-unstyled'>"),a=this.metaRelations;for(r in a)o=a[r],t.push("      "+e(JST["relation/meta_relation_item"]({rel:o,name:o.name||r})));return t.push("    </ul>\n  </td>\n  <td class='methods'>"),t.push("    "+e(JST["relation/row_methods"]({href:this.href,methods:this.methods}))),t.push("  </td>\n</tr>"),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["relation/row_methods"]=function(e){return function(){var e,n;return e=window.HAML.cleanValue,n=[],null!=this.methods["delete"]&&n.push(""+e(JST["relation/delete"]({href:this.href,properties:this.methods["delete"]}))),null!=this.methods.post&&n.push(""+e(JST["relation/post"]({href:this.href,properties:this.methods.post}))),null!=this.methods.put&&n.push(""+e(JST["relation/put"]({href:this.href,properties:this.methods.put}))),null!=this.methods.get&&n.push(""+e(JST["relation/get"]({href:this.href,properties:this.methods.get}))),n.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"")}.call(window.HAML.context(e))}}.call(this),function(){null==window.JST&&(window.JST={}),window.JST["request/confirm_delete"]=function(e){return function(){var e,n,t;return n=window.HAML.escape,e=window.HAML.cleanValue,t=[],t.push("<div class='modal-header'>\n  <button class='close' type='button' data-dismiss='modal' aria_hidden>&times;</button>\n  <h class='modal-title'>Confirm Delete </h>\n</div>\n<form id='confirm-form' role='form'>\n  <div class='modal-body'>\n    <p class='small'>"+n(e(this.url))+"</p>\n  </div>\n  <div class='clearfix modal-footer'>\n    <button class='btn btn-warning pull-left' type='button' data-dismiss='modal'>Abort</button>\n    <button class='btn btn-danger pull-right' type='submit'>DELETE</button>\n  </div>\n</form>"),t.join("\n").replace(/\s([\w-]+)='\x93true'/gm," $1").replace(/\s([\w-]+)='\x93false'/gm,"").replace(/\s(?:id|class)=(['"])(\1)/gm,"")}.call(window.HAML.context(e))}}.call(this),function(){$(function(){var e,n;return e=Logger.create({namespace:"APP.BrowserState",level:"info"}),n=function(n,t){var r,o;return e.debug("pushOrReplaceState",arguments),n||(n=URIjs(window.location.hash.substring(1)).normalize().readable()),t||(t=n),$("title").html("JSON-ROA Browser : "+t),r=URIjs(window.location.href).hash(n).normalize().href(),o=n,e.debug("history.state",[history.state]),history.state===o?(e.debug("replaceState",[o,t,r]),history.replaceState(o,t,r)):(e.debug("pushState",[o,t,r]),history.pushState(o,t,r))},$(window).on("hashchange",function(){return e.debug("onHashchange",arguments),APP.Request.get(URIjs(window.location.hash.substring(1)).normalize().href())}),window.APP||(window.APP={}),window.APP.BrowserState={pushOrReplaceState:n}})}.call(this),function(){$(function(){var e,n,t,r,o,a,s,l,i,u,c;return r=Logger.create({namespace:"APP.JSON-ROA",level:"info"}),e=function(){return r.debug("clean",arguments),$(".resource-name").empty(),$("#self-relation tbody").empty(),$("#self-relation").hide(),$("#relations tbody").empty(),$("#relations").hide(),$("#collection tbody").empty(),$("#collection").hide(),$("#next").hide()},s=function(e,n){return JST["relation/row"]({relName:n,title:e.name,href:e.href,methods:e.methods||{get:{}},metaRelations:e.relations||{}})},i=function(e){return null!=e.name&&$("#resource-name").html(e.name)},c=function(e){var n;return(n=e["self-relation"])&&null!=n?($("#self-relation tbody").append(s(n,e.name||"self")),$("#self-relation").show()):void 0},u=function(e){var n;return(n=e.relations)&&null!=n?(_.each(n,function(e,n){return $("#relations tbody").append(s(e,n))}),$("#relations").show()):void 0},l=function(e){var n,t,r;return(n=e.collection)&&null!=n&&((t=n.next)&&null!=t&&($("#next").attr("href",t.href),$("#next").show()),(r=n.relations)&&null!=r)?(_.each(r,function(e,n){return $("#collection tbody").append(s(e,n))}),$("#collection").show()):void 0},a=function(e){var n,t;return 200<=(t=e.status)&&600>t&&/json-roa/.test(e.getResponseHeader("content-type"))&&(n=e.responseJSON["_json-roa"])&&null!=n?(i(n),c(n),u(n),l(n)):void 0},t=function(e){var n;return e.preventDefault(),n=$(e.currentTarget).attr("href"),APP.URL.build($(e.currentTarget).attr("href"),APP.Request.get)},n=function(e){return e.preventDefault(),APP.URL.build($(e.currentTarget).attr("href"),function(e){var n;return n=JST["request/confirm_delete"]({url:e}),APP.Util.confirm(n,function(){return APP.Request.del(e)})})},o=function(e){return e.preventDefault(),APP.URL.build($(e.currentTarget).attr("href"),function(e){return APP.Request.postPutModal(e,"put")})},$("#collection").on("click","a#next",function(e){return t(e)}),$("#self-relation, #collection, #relations").on("click","a.relation",function(e){switch($(e.currentTarget).attr("data-method")){case"delete":return n(e);case"put":return o(e);default:return t(e)}}),window.APP||(window.APP={}),window.APP["JSON-ROA"]={clean:e,renderAndShow:a}})}.call(this),function(){var e=[].slice;null==window.Logger&&!function(){var n,t;return window.Logger={},t=["error","warn","info","debug"],n=function(n){var r,o,a,s,l,i,u;return r=1,a="Root",s=function(e){var n;return r=(n=t.indexOf(e))>=0?n:1},l=function(e){return a=null!=e?e:"Root"},l(null!=n?n.namespace:void 0),s(null!=n?n.level:void 0),o=function(e,n){return n.unshift([moment().format(),a,e.toUpperCase()]),console[e].apply(console,n)},u={setLevel:s,error:function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],o("error",n)},warn:function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],r>=1?o("warn",n):void 0},info:function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],r>=2?o("info",n):void 0},debug:function(){var n;return n=1<=arguments.length?e.call(arguments,0):[],r>=3?o("debug",n):void 0}},(i=window.Logger)[a]||(i[a]=u),u},n(),Logger.create=n}()}.call(this),function(){$(function(){var e,n,t,r,o,a;return r=Logger.create({namespace:"APP.Request",level:"debug"}),e=function(e,n,t,o){var a,s;return r.debug("ajax",arguments),s=Math.random().toString(),APP.Response.setResponseWaiting(s),a={url:e,headers:APP.Util.disectHeaders($("#request-headers").val()),beforeSend:function(n){return n.url=e,n.requestId=s},xhrFields:{withCredentials:!0},type:null!=n?n:"get",contentType:null!=t?t:"text/plain",data:o,processData:!1},$.ajax(a).done(function(e,n,t){return APP.Response.responseHanlder(t)}).fail(function(e){return APP.Response.responseHanlder(e)}).always(APP.BrowserState.pushOrReplaceState(e))},t=function(n){return r.debug("get",{url:n}),e(n,"get")},n=function(n){return r.debug("del",{url:n}),e(n,"delete")},o=null,a=function(e,n){return o={url:e,method:n},r.debug("postPutModal",arguments),$("#post-put-modal button[type=submit]").html(n.toUpperCase()),$("#post-put-modal .url").html(e),$("#post-put-modal").modal({})},$("#post-put-modal form").on("submit",function(n){return n.preventDefault(),$("#post-put-modal").modal("hide"),e(o.url,o.method,$("#post-put-modal .content-type").val(),$("#post-put-modal .content").val())}),window.APP||(window.APP={}),window.APP.Request={get:t,del:n,postPutModal:a}})}.call(this),function(){$(function(){var e,n,t,r,o,a,s,l,i,u;return n=Logger.create({namespace:"APP.Response",level:"debug"}),e=function(e){return $("#response").attr("data-request-id",e),$("#response-status").empty(),$("#iframe").attr("src",null),$("#response-content-panel").hide(),$("#response-headers").empty(),$("#response-headers-panel").hide(),$("#response-text").empty(),$("#response-text-panel").hide(),$("#response-json-data").empty(),$("#response-json-data-panel").hide(),$("#response-json-roa-data").empty(),$("#response-json-roa-panel").hide()},i=function(n){return window.APP["JSON-ROA"].clean(),e(n),$("#response-status").html(JST["alert/warning"]({message:JST.loading({message:"Loading"})}))},r=function(e){var n,t,r,o;return t=JST.jqXHR_status({jqXHR:e}),n=200<=(r=e.status)&&300>r?JST["alert/success"]({message:t}):JST["alert/danger"](300<=(o=e.status)&&600>o?{message:t}:{message:"<strong>ERROR</strong> See the browser logs for details."}),$("#response-status").html(n)},o=function(e){var n;return 200<=(n=e.status)&&600>n?($("#response-headers").html(e.getAllResponseHeaders()),$("#response-headers-panel").show()):($("#response-headers").empty(),$("#response-headers-panel").hide())},u=function(e){var n;return 200<=(n=e.status)&&600>n&&null!=e.responseText&&""!==e.responseText.trim()?($("#response-text").html(e.responseText),$("#response-text-panel").show()):($("#response-text").empty(),$("#response-text-panel").hide())},a=function(e){var n;return 200<=(n=e.status)&&300>n?($("iframe").attr("src",e.url),$("#open-content").attr("href",e.url),$("#response-content-panel").show()):void 0},s=function(e){var n,t;return 200<=(t=e.status)&&600>t?(n=_.chain(e.responseJSON).pairs().reject(function(e){var n,t;return n=e[0],t=e[1],"_json-roa"===n}).object().value(),$("#response-json-data").html(FormatJson.plain(n)),$("#response-json-data-panel").show()):($("#response-json-data").empty(),$("#response-json-data-panel").hide())},l=function(e){var n;return 200<=(n=e.status)&&600>n?($("#response-json-roa").html(FormatJson.plain(e.responseJSON["_json-roa"])),$("#response-json-roa-panel").show()):($("#response-json-roa-data").empty(),$("#response-json-roa-panel").hide())},t=function(t){var i;return n.debug({jqXHR:t}),t.headers=APP.Util.disectHeaders(t.getAllResponseHeaders()),i=t.headers["content-type"]||"",$("#response").attr("data-request-id")!==t.requestId?n.warn("requestId "+t.requestId+" conflict"):(e(),r(t),o(t),window.APP["JSON-ROA"].renderAndShow(t),/text\/plain/.test(i)&&u(t),/json/.test(i)||a(t),/json/.test(i)&&s(t),/json-roa/.test(i)?l(t):void 0)},window.APP||(window.APP={}),window.APP.Response={setResponseWaiting:i,responseHanlder:t}})}.call(this),function(){$(function(){var e,n,t,r,o,a,s;return o=Logger.create({namespace:"APP.URL",level:"info"}),a=function(e){return""===e.trim()?null:e},s=null,$("#url-expansion-modal form").on("submit",function(e){var n,t;try{return e.preventDefault(),$("#url-expansion-modal").modal("hide"),t=JSON.parse($(e.target).find("textarea").val()),n=window["URI-Templates"](s.url).fillFromObject(t),s.cont(n)}catch(r){throw e=r,o.error(e),$("#error-modal .modal-body pre").html(e.stack.toString()),$("#error-modal").modal({}),e}}),e=function(e){var n,t,r,s,l;return o.debug("amend",arguments),l=URIjs(e),n=URIjs(window.location.hash.substring(1)),t=a(l.hostname())||n.hostname(),r=a(l.port())||n.port(),s=a(l.protocol())||n.protocol(),l.hostname(t).port(r).protocol(s).normalize().href()},t=function(e,n){var t;return o.debug("buildTemplated",arguments),t=_.chain(window["URI-Templates"](e).varNames).map(function(e){return[""+e,null]}).object().value(),s={url:e,cont:n},$("#templated-url").html(e),$("#url-parameters-input").val(FormatJson.plain(t)),$("#url-expansion-modal").modal({})},r=function(e){return URITemplate(e).expand({})!==e},n=function(n,a){var s;return o.debug("build",arguments),s=function(n){return a(e(n))},r(n)?t(n,s):s(n)},window.APP||(window.APP={}),window.APP.URL={isTemplated:r,build:n,amend:e}})}.call(this),function(){$(function(){var e,n,t,r;return r=Logger.create({namespace:"APP.Util",level:"debug"}),t=function(e){return _.chain(e.toLowerCase().split("\n")).map(function(e){return e.match(/([^:]+):(.+)/)}).filter(function(e){return null!=e}).map(function(e){return[e[1].trim(),e[2].trim()]}).object().value()},n=null,e=function(e,t){return n=t,$("#confirm-modal .modal-content").empty(),$("#confirm-modal .modal-content").html(e),$("#confirm-modal").modal({})},$("#confirm-modal").on("submit","form",function(e){return e.preventDefault(),$("#confirm-modal").modal("hide"),n()}),window.APP||(window.APP={}),window.APP.Util={confirm:e,disectHeaders:t}})}.call(this),function(){$(function(){var e,n;return window.logger=e=Logger.create({namespace:"Main",level:"debug"}),$("#nojs-alert").remove(),$("#self-relation, #collection, #relations").hide(),$("#response-headers-panel").hide(),$("#response-json-data-panel, #response-json-roa-panel").hide(),$("#response-text-panel, #response-content-panel").hide(),n=URIjs(window.location.href).normalizeHash().fragment().trim(),n.length>0&&($("#url").val(n),APP.BrowserState.pushOrReplaceState(),APP.Request.get(n)),$("#get").click(function(n){return e.debug({onGetClick:n})}),$("#request-form").on("submit",function(n){return e.debug("onRequestFormSubmit",arguments),n.preventDefault(),APP.Request.get($("#url").val()),!1})})}.call(this);